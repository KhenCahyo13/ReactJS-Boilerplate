# Routes

## Purpose

This folder contains **file-based routing** definitions using **TanStack Router**. Routes are automatically generated based on the file structure.

## Structure

```
routes/
├── __root.tsx                        # Root layout (wraps all routes)
├── (authenticated)/                  # Route group with auth guard
│   ├── route.tsx                     # Layout for authenticated routes
│   ├── index.lazy.tsx                # Dashboard (/)
│   └── posts/
│       └── index.lazy.tsx            # Posts list (/posts)
└── (unauthenticated)/                # Route group without auth
    └── (auth)/
        └── login.lazy.tsx            # Login page (/login)
```

## Key Concepts

### Route Groups `(folder)`
Folders wrapped in parentheses are **layout groups** and don't affect the URL:
- `(authenticated)/` → doesn't add `/authenticated` to URL
- Used for organizing routes with shared layouts or guards

### Lazy Routes `.lazy.tsx`
Lazy-loaded route components for better code splitting:
```typescript
// posts/index.lazy.tsx
import { createLazyFileRoute } from '@tanstack/react-router';
import PostsList from '@/features/posts/list';

export const Route = createLazyFileRoute('/(authenticated)/posts/')({ 
  component: PostsList 
});
```

### Root Layout `__root.tsx`
The root component that wraps all routes:
```typescript
import { createRootRoute, Outlet } from '@tanstack/react-router';

export const Route = createRootRoute({
  component: () => (
    <>
      <Outlet /> {/* Renders child routes */}
    </>
  ),
});
```

### Route Layouts `route.tsx`
Group-level layouts with guards or shared UI:
```typescript
// (authenticated)/route.tsx
import { createFileRoute, Outlet, redirect } from '@tanstack/react-router';
import { AuthenticatedLayout } from '@/components/layouts/authenticated-layout';

export const Route = createFileRoute('/(authenticated)')({ 
  beforeLoad: async ({ context }) => {
    if (!context.auth.isAuthenticated) {
      throw redirect({ to: '/login' });
    }
  },
  component: () => (
    <AuthenticatedLayout>
      <Outlet />
    </AuthenticatedLayout>
  ),
});
```

## File Naming Conventions

| Pattern | Purpose | Example URL |
|---------|---------|-------------|
| `index.tsx` | Index route of folder | `/posts` (for `posts/index.tsx`) |
| `$id.tsx` | Dynamic parameter | `/posts/123` (for `posts/$id.tsx`) |
| `route.tsx` | Layout only, no page | N/A (wraps children) |
| `__root.tsx` | Root layout | N/A (wraps all routes) |
| `.lazy.tsx` | Lazy-loaded route | Same as non-lazy |

## Route Generation

TanStack Router automatically generates a `routeTree.gen.ts` file. **Do not edit this file manually**—it's regenerated on every dev server start.

## Adding a New Route

1. **Create the feature** in `features/`:
   ```
   features/tickets/list/index.tsx
   ```

2. **Add the route file** in `routes/`:
   ```typescript
   // routes/(authenticated)/tickets/index.lazy.tsx
   import { createLazyFileRoute } from '@tanstack/react-router';
   import TicketsList from '@/features/tickets/list';
   
   export const Route = createLazyFileRoute('/(authenticated)/tickets/')({ 
     component: TicketsList 
   });
   ```

3. **Restart dev server** to regenerate route tree

## Navigation

Use TanStack Router's `Link` component for type-safe navigation:
```typescript
import { Link } from '@tanstack/react-router';

<Link to="/posts" search={{ filter: 'active' }}>
  View Posts
</Link>
```

## Resources

- [TanStack Router Documentation](https://tanstack.com/router)
- [File-based Routing Guide](https://tanstack.com/router/latest/docs/framework/react/guide/file-based-routing)